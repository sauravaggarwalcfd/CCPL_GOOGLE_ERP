<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <?!= include('styles') ?>
</head>
<body class="mode-light accent-orange">

<!-- ============================================================
     CC ERP v6 ‚Äî Application Shell
     Matches CC_ERP_Main.jsx pixel-perfect
     ============================================================ -->
<div class="app-root theme-anim" id="appRoot">

  <!-- ‚ïê‚ïê SHELL BAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="shell-bar" id="shellBar">

    <!-- Logo -->
    <div class="shell-logo">
      <div class="shell-logo-icon">üì¶</div>
      <div class="shell-logo-text">
        <h1>CC ERP</h1>
        <span>Confidence Clothing</span>
      </div>
    </div>

    <!-- Breadcrumb -->
    <div class="shell-breadcrumb" id="breadcrumb">
      <a onclick="navigateTo('dashboard')">Home</a>
    </div>

    <!-- Ctrl+K Search Pill -->
    <button class="shell-search-pill" onclick="openCommandPalette()" title="Ctrl+K">
      <span class="icon">üîç</span>
      <span class="label">Search‚Ä¶</span>
      <span class="kbd" style="margin-left:8px">Ctrl</span>
      <span class="kbd">K</span>
    </button>

    <div class="shell-spacer"></div>

    <!-- Quick Theme -->
    <div class="shell-section">
      <span class="shell-section-label">Theme</span>
      <div class="shell-theme-bar" id="themeBar">
        <!-- Populated by JS -->
      </div>
    </div>

    <!-- Quick Accent -->
    <div class="shell-section">
      <span class="shell-section-label">Accent</span>
      <div class="shell-accent-bar" id="accentBar">
        <!-- Populated by JS -->
      </div>
    </div>

    <!-- Notification Bell -->
    <div style="position:relative;flex-shrink:0;" id="notifWrapper">
      <button class="shell-icon-btn" id="btnNotif" onclick="toggleNotifPanel()">
        üîî
        <div class="notif-badge" id="notifBadge" style="display:none;"></div>
      </button>
      <!-- Notification Panel (rendered by JS) -->
      <div id="notifPanelContainer"></div>
    </div>

    <!-- Settings -->
    <button class="shell-icon-btn" id="btnSettings" onclick="toggleSettingsPanel()">‚öôÔ∏è</button>

    <!-- Separator -->
    <div class="shell-divider"></div>

    <!-- Avatars -->
    <div class="shell-avatars" id="shellAvatars">
      <!-- Populated by JS -->
    </div>
  </div>

  <!-- ‚ïê‚ïê BODY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="app-body">

    <!-- ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="sidebar" id="sidebar" style="width:340px;">

      <!-- Panel label -->
      <div class="sidebar-label" id="sidebarLabel">
        <span>Navigation ¬∑ <span id="sidebarWidthLabel">340</span>px</span>
        <button onclick="toggleCompactSidebar(true)" title="Collapse">‚Äπ</button>
      </div>

      <div class="sidebar-scroll" id="sidebarScroll">

        <!-- Quick Access -->
        <div id="quickAccessSection">
          <div class="qa-header">
            <span>‚≠ê Quick Access</span>
            <button onclick="openCommandPalette()" title="Add via Ctrl+K">Ôºã</button>
            <button id="qaEditBtn" onclick="toggleQAEdit()">Edit</button>
          </div>
          <div id="quickAccessList">
            <!-- Populated by JS -->
          </div>
          <div style="height:1px;background:var(--divider);margin:4px 0;"></div>
        </div>

        <!-- Module Nav -->
        <div class="sb-section-label" id="modulesLabel">Modules</div>
        <div id="moduleNav">
          <!-- Populated by JS -->
        </div>

        <!-- Divider + Extra Nav -->
        <div class="nav-divider"></div>
        <div id="extraNav">
          <!-- Populated by JS -->
        </div>

      </div>

      <!-- User Card -->
      <div class="sidebar-user" id="sidebarUser">
        <!-- Populated by JS -->
      </div>
    </div>

    <!-- ‚îÄ‚îÄ DRAG HANDLE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="drag-handle" id="dragHandle">
      <div class="bar"></div>
    </div>

    <!-- ‚îÄ‚îÄ MAIN CONTENT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="main-area" id="mainArea">

      <!-- Sub-toolbar -->
      <div class="sub-toolbar" id="subToolbar">
        <span class="title">üè† Home ‚Äî Module Overview</span>
        <div class="shell-spacer"></div>
        <span class="time" id="clockDisplay"></span>
        <button class="tool-btn">üñ®Ô∏è Print</button>
        <button class="tool-btn">üì§ Export ‚ñæ</button>
      </div>

      <!-- Content -->
      <div class="content-scroll" id="contentArea">
        <div class="text-center p-4">
          <div class="spinner"></div>
          <div class="text-muted mt-2">Loading CC ERP...</div>
        </div>
      </div>

      <!-- Status Bar -->
      <div class="status-bar" id="statusBar">
        <span class="lbl">MODULES</span>
        <span class="val" id="statModules">8</span>
        <div class="sep"></div>
        <span class="lbl">ONLINE</span>
        <span class="val" id="statOnline" style="color:#22c55e;">1</span>
        <div class="sep"></div>
        <span class="lbl">PENDING</span>
        <span class="val" id="statPending" style="color:#ef4444;">0</span>
        <div class="shell-spacer"></div>
        <span style="font-size:9px;color:var(--text-d);" id="statusRight">CC ERP ¬∑ Home</span>
        <div class="sep"></div>
        <span style="font-size:9px;color:var(--text-d);" id="statusClock"></span>
      </div>
    </div>

  </div>
</div>

<!-- ‚îÄ‚îÄ COMMAND PALETTE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div class="cmd-overlay" id="cmdOverlay" onclick="closeCommandPalette(event)">
  <div class="cmd-panel cmd-anim" onclick="event.stopPropagation()">
    <div class="cmd-search">
      <span class="icon">üîç</span>
      <input type="text" id="cmdInput" placeholder="Search modules, actions, records, settings‚Ä¶" oninput="filterCommands(this.value)" onkeydown="handleCmdKey(event)">
      <span class="esc-badge">ESC</span>
    </div>
    <div class="cmd-results" id="cmdResults">
      <!-- Populated by JS -->
    </div>
    <div class="cmd-footer">
      <div class="hint"><span class="key">‚Üë‚Üì</span><span class="hlbl">Navigate</span></div>
      <div class="hint"><span class="key">‚Üµ</span><span class="hlbl">Open</span></div>
      <div class="hint"><span class="key">‚òÜ</span><span class="hlbl">Pin to Quick Access</span></div>
      <div class="hint"><span class="key">ESC</span><span class="hlbl">Close</span></div>
    </div>
  </div>
</div>

<!-- ‚îÄ‚îÄ SETTINGS PANEL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div class="settings-overlay" id="settingsOverlay" onclick="closeSettingsPanel()"></div>
<div class="settings-panel" id="settingsPanel">
  <div class="settings-header">
    <div class="top">
      <div>
        <div class="title">‚öô Workspace Settings</div>
        <div class="sub">Personalise your ERP interface</div>
      </div>
      <button class="close-btn" onclick="closeSettingsPanel()">√ó</button>
    </div>
  </div>
  <div class="settings-body" id="settingsBody">
    <!-- Populated by JS -->
  </div>
  <div class="settings-footer">
    <button class="reset-btn" onclick="resetSettings()">‚Ü© Reset Defaults</button>
    <button class="apply-btn" onclick="applySettings()">‚úì Apply & Close</button>
  </div>
</div>

<!-- ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div class="toast-container" id="toastContainer"></div>

<!-- ‚îÄ‚îÄ BACKDROP (for dropdowns) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="globalBackdrop" style="display:none;position:fixed;inset:0;z-index:9000;" onclick="closeAllDropdowns()"></div>

<?!= include('scripts') ?>

</body>
</html>
